-- Create vision_missions table for managing business vision and mission content
CREATE TABLE public.vision_missions (
  id UUID NOT NULL DEFAULT gen_random_uuid() PRIMARY KEY,
  business_type TEXT NOT NULL,
  vision_th TEXT NOT NULL,
  vision_en TEXT,
  vision_cn TEXT,
  vision_sub_th TEXT,
  vision_sub_en TEXT,
  vision_sub_cn TEXT,
  missions JSONB NOT NULL DEFAULT '[]'::jsonb,
  core_concept JSONB,
  position_order INTEGER DEFAULT 0,
  is_published BOOLEAN DEFAULT true,
  created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),
  updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()
);

-- Enable Row Level Security
ALTER TABLE public.vision_missions ENABLE ROW LEVEL SECURITY;

-- Create policies for admin access
CREATE POLICY "Admins can view all vision_missions" 
ON public.vision_missions 
FOR SELECT 
USING (has_role(auth.uid(), 'admin'::app_role));

CREATE POLICY "Admins can insert vision_missions" 
ON public.vision_missions 
FOR INSERT 
WITH CHECK (has_role(auth.uid(), 'admin'::app_role));

CREATE POLICY "Admins can update vision_missions" 
ON public.vision_missions 
FOR UPDATE 
USING (has_role(auth.uid(), 'admin'::app_role));

CREATE POLICY "Admins can delete vision_missions" 
ON public.vision_missions 
FOR DELETE 
USING (has_role(auth.uid(), 'admin'::app_role));

-- Create policy for public read access to published content
CREATE POLICY "Anyone can read published vision_missions" 
ON public.vision_missions 
FOR SELECT 
USING (is_published = true);

-- Create trigger for automatic timestamp updates
CREATE TRIGGER update_vision_missions_updated_at
BEFORE UPDATE ON public.vision_missions
FOR EACH ROW
EXECUTE FUNCTION public.update_updated_at_column();

-- Insert initial data for each business type
INSERT INTO public.vision_missions (business_type, vision_th, vision_sub_th, missions, core_concept, position_order) VALUES
(
  'realestate',
  '"เป็นกลุ่มธุรกิจอสังหาริมทรัพย์ที่มุ่งสร้างคุณค่าการอยู่อาศัยอย่างยั่งยืน ด้วยคุณภาพที่จับต้องได้ บนทำเลที่มีศักยภาพเติบโตจริง เพื่อให้ลูกค้าอยู่อาศัยได้อย่างมั่นคง ในทุกสภาวะเศรษฐกิจ"',
  'ไม่ใช่เพียงการขายที่อยู่อาศัย แต่คือการสร้างความมั่นใจให้กับการตัดสินใจครั้งสำคัญของชีวิต',
  '[
    {"title_th": "พัฒนาโครงการที่คุ้มค่าและตอบโจทย์การอยู่อาศัยจริง", "description_th": "ออกแบบและพัฒนาโครงการโดยคำนึงถึงการใช้งานจริงในชีวิตประจำวัน ลดสิ่งที่ไม่จำเป็น เน้นความคุ้มค่าในระยะยาว เพื่อให้ลูกค้าได้ที่อยู่อาศัยที่เหมาะสม ไม่เป็นภาระในอนาคต"},
    {"title_th": "รักษามาตรฐานคุณภาพวัสดุและงานก่อสร้างอย่างเคร่งครัด", "description_th": "คัดเลือกวัสดุและระบบก่อสร้างที่มีคุณภาพ ได้มาตรฐาน และเหมาะสมกับการใช้งาน ไม่ลดคุณภาพเพื่อผลกำไรระยะสั้น เพราะเชื่อว่า ที่อยู่อาศัยที่ดี คือการลงทุนเพื่อคุณภาพชีวิต"},
    {"title_th": "คัดเลือกทำเลที่มีศักยภาพการเติบโตในระยะยาว", "description_th": "พัฒนาโครงการบนทำเลที่มีโครงสร้างพื้นฐานและระบบคมนาคมรองรับ เป็นพื้นที่ที่มีแนวโน้มการเติบโตของมูลค่าในอนาคต เพื่อให้ลูกค้าอยู่อาศัยได้อย่างมั่นใจ และรักษามูลค่าทรัพย์สินได้จริง"},
    {"title_th": "ดำเนินธุรกิจด้วยคุณธรรม ความโปร่งใส และความรับผิดชอบ", "description_th": "ยึดมั่นในความซื่อตรงต่อผู้บริโภค คู่ค้า และสังคม สื่อสารอย่างตรงไปตรงมา ไม่โฆษณาเกินจริง เพราะความเชื่อมั่น คือรากฐานของความยั่งยืนในธุรกิจ"},
    {"title_th": "บริหารองค์กรอย่างรอบคอบ พร้อมรับการเปลี่ยนแปลง", "description_th": "บริหารจัดการองค์กรด้วยวินัยทางการเงินและการวางแผนระยะยาว พร้อมปรับกลยุทธ์ให้สอดคล้องกับสภาวะเศรษฐกิจและตลาด เพื่อให้ JW Group เติบโตอย่างมั่นคง ต่อเนื่อง และยั่งยืน"}
  ]'::jsonb,
  '{"title_th": "Good Living for Your Life", "subtitle_th": "การอยู่อาศัยที่ดีกว่า สำหรับคุณ…ในระยะยาว", "description_th": "ไม่ใช่เพียงวันนี้ แต่เพื่อความมั่นคงและคุณภาพชีวิตที่ดีในวันข้างหน้า"}'::jsonb,
  1
),
(
  'hotel',
  'มุ่งมั่นเป็นโรงแรมที่ลูกค้าเลือกพักซ้ำ ด้วยประสบการณ์การเข้าพักที่ "มั่นใจ สะดวก และคุ้มค่า"',
  'ผสานความสะดวกสบาย คุณภาพการบริการ และการดูแลอย่างจริงใจตลอด 24 ชั่วโมง เพื่อตอบโจทย์นักเดินทางยุคใหม่ในทุกสถานการณ์',
  '[
    {"title_th": "ความสบายที่เชื่อถือได้ (Reliable Comfort)", "description_th": "มอบการเข้าพักที่เรียบง่าย แต่ใส่ใจในรายละเอียด ตั้งแต่การเช็คอิน การพักผ่อน จนถึงการเดินทางต่อ เพื่อให้แขกทุกคนรู้สึกสบายใจ และมั่นใจในทุกการเข้าพัก"},
    {"title_th": "บริการ 24 ชั่วโมง ที่ตอบโจทย์การใช้งานจริง", "description_th": "ให้บริการอย่างต่อเนื่องตลอด 24 ชั่วโมง พร้อมสิ่งอำนวยความสะดวกที่ใช้งานได้จริงและคุ้มค่า เช่น พื้นที่ทำงานและนั่งพักผ่อน ฟิตเนส ห้องอาหารญี่ปุ่น Junichi คาเฟ่ & บาร์ เพื่อรองรับทั้งนักธุรกิจ นักเดินทาง และครอบครัว"},
    {"title_th": "ความคุ้มค่าในทุกมิติ (Value with Quality)", "description_th": "สร้างความสมดุลระหว่างราคา คุณภาพ และการบริการ มอบประสบการณ์ที่เกินความคาดหวังในราคาที่เหมาะสม โดยไม่ลดมาตรฐาน และไม่สร้างภาระให้กับลูกค้าในภาวะเศรษฐกิจปัจจุบัน"},
    {"title_th": "ทำเลที่ช่วยประหยัดเวลาและพลังงาน", "description_th": "ตั้งอยู่ใกล้สนามบินดอนเมือง รองรับผู้โดยสารต่อเครื่อง เที่ยวบินเช้า และนักธุรกิจที่ต้องการที่พักที่ \"สะดวก ประหยัดเวลา และวางใจได้\""},
    {"title_th": "การเติบโตอย่างมั่นคงและยั่งยืน", "description_th": "ดำเนินธุรกิจด้วยความรับผิดชอบ บริหารต้นทุนอย่างมีประสิทธิภาพ พร้อมพัฒนาคุณภาพบริการอย่างต่อเนื่อง เพื่อความมั่นคงขององค์กร พนักงาน และความเชื่อมั่นของลูกค้าในระยะยาว"}
  ]'::jsonb,
  NULL,
  2
),
(
  'pet',
  '"เป็นโรงพยาบาลสัตว์ครบวงจรระดับมาตรฐานโรงพยาบาลคน ที่ผสานเทคโนโลยีทางการแพทย์สมัยใหม่ ทีมสัตวแพทย์ผู้เชี่ยวชาญ และการบริการด้วยหัวใจตลอด 24 ชั่วโมง เพื่อยกระดับคุณภาพชีวิตและอายุขัยของสัตว์เลี้ยง ภายใต้ราคาที่เป็นธรรมและเข้าถึงได้"',
  NULL,
  '[
    {"title_th": "ให้บริการรักษาพยาบาลสัตว์เลี้ยงแบบครบวงจร", "description_th": "ครอบคลุมตั้งแต่การป้องกัน วินิจฉัย รักษา ฟื้นฟูสุขภาพ ไปจนถึงบริการเสริม เช่น อาบน้ำตัดขน โรงแรมสัตว์เลี้ยง และบริการฉุกเฉินตลอด 24 ชั่วโมง สำหรับสุนัข แมว และสัตว์เลี้ยงพิเศษ (Exotic Pets)"},
    {"title_th": "ยกระดับมาตรฐานการรักษาเทียบเท่าโรงพยาบาลคน", "description_th": "ด้วยเครื่องมือแพทย์ที่ทันสมัย ระบบการรักษาที่ได้มาตรฐานสากล และทีมสัตวแพทย์เฉพาะทางที่มีประสบการณ์สูง"},
    {"title_th": "ให้บริการด้วยคุณธรรม จริยธรรม และความโปร่งใส", "description_th": "ยึดหลักความซื่อสัตย์ต่อผู้รับบริการ ให้ข้อมูลการรักษาและค่าใช้จ่ายอย่างชัดเจน เป็นธรรม และสมเหตุสมผล"},
    {"title_th": "ดูแลสัตว์เลี้ยงด้วยความเข้าใจและเอาใจใส่เสมือนสมาชิกในครอบครัว", "description_th": "มุ่งสร้างประสบการณ์การรักษาที่อบอุ่น ปลอดภัย และไว้วางใจได้ ทั้งต่อสัตว์เลี้ยงและเจ้าของ"},
    {"title_th": "ส่งเสริมความรับผิดชอบต่อสังคมและความยั่งยืน", "description_th": "มีส่วนร่วมในการลดปัญหาสัตว์จรจัด ส่งเสริมการป้องกันโรค การทำหมัน และการให้ความรู้ด้านสุขภาพสัตว์ เพื่อคุณภาพชีวิตที่ดีของสัตว์เลี้ยงและสังคมโดยรวม"}
  ]'::jsonb,
  NULL,
  3
),
(
  'herbal',
  '"เป็นแบรนด์ผลิตภัณฑ์ดูแลสุขภาพหลอดเลือดจากสมุนไพร ที่ได้รับความเชื่อมั่นในด้านคุณภาพ มาตรฐาน และความปลอดภัย เพื่อยกระดับคุณภาพชีวิตของผู้คนอย่างยั่งยืน"',
  'ไม่ใช่เพียงการดูแลสุขภาพในวันนี้ แต่คือการสร้างโอกาสให้ผู้คนมีชีวิตที่แข็งแรงในระยะยาว',
  '[
    {"title_th": "พัฒนาผลิตภัณฑ์สมุนไพรไทยสู่มาตรฐานสากล", "description_th": "คัดเลือกและพัฒนาสมุนไพรไทยด้วยกระบวนการผลิตที่ได้มาตรฐาน ผ่านการควบคุมคุณภาพ ความปลอดภัย และการวิจัยอย่างเหมาะสม เพื่อให้ผู้บริโภคมั่นใจในทุกขั้นตอนของผลิตภัณฑ์"},
    {"title_th": "ส่งเสริมการเข้าถึงการดูแลสุขภาพอย่างมีคุณภาพ", "description_th": "มุ่งพัฒนาผลิตภัณฑ์ที่มีคุณภาพในราคาที่เหมาะสม เพื่อให้คนไทยสามารถเข้าถึงทางเลือกในการดูแลสุขภาพหลอดเลือดได้อย่างทั่วถึง"},
    {"title_th": "ดำเนินธุรกิจควบคู่กับความรับผิดชอบต่อสังคม", "description_th": "จัดสรรรายได้ส่วนหนึ่งเพื่อสนับสนุนอุปกรณ์ทางการแพทย์ และกิจกรรมด้านสาธารณสุขให้แก่โรงพยาบาลและชุมชนในพื้นที่ห่างไกล เพื่อร่วมยกระดับคุณภาพชีวิตของสังคมไทย"},
    {"title_th": "เป็นส่วนหนึ่งในการส่งเสริมสุขภาพหลอดเลือดของผู้คน", "description_th": "ให้ความรู้และสร้างความตระหนักรู้ด้านการดูแลสุขภาพหลอดเลือด ควบคู่กับการใช้ผลิตภัณฑ์อย่างถูกต้อง เพื่อสนับสนุนการมีสุขภาพที่ดีอย่างยั่งยืน"}
  ]'::jsonb,
  '{"title_th": "ดูแลหลอดเลือดอย่างเข้าใจ", "subtitle_th": "เพื่อชีวิตที่แข็งแรงในระยะยาว", "description_th": ""}'::jsonb,
  4
);